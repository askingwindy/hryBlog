title: "1.SQL学习：SQL列类型"
date: 2015-04-03 10:36:30
tags: [SQL]
categories: SQL基本知识
description: 主要学习了SQL表的数值类型以及时间戳的表达、运算
---

# 列
不同列类型占用的空间不同
- 选列的原则：够用、不浪费
- 一般不采用枚举：
	- 违背了关心数据库的设计原则
	- 列应该代表无法再分割的一项

## 列类型
###数值型
#### 整型
|类型|字节|位|无符号|有符号
|---|---|---|---|---|
|`TINYINT`|1|8|$[0, 2^8-1]$|$[-2^7,2^7-1]$|
|`SMALLINT`|2|16|$[0,2^{16}-1]$|$[-2^{15}, 2^{15}-1]$|
|`MEDIUMINT`|3|24|$[0,2^{24}-1]$|$[-2^{23}, 2^{23}-1]$|
|`INT`|4|32|$[0,2^{32}-1]$|$[-2^{31}, 2^{31}-1]$|
|`BIGINT`|8|64|$[0,2^{64}-1]$|$[-2^{63}, 2^{63}-1]$|
#####可选属性
|符号|意义|其他|
|---|---|---|
|`M`|宽度|**仅**在ZEROFILL时才有意义|
|`UNSIGNED`|无符号类型|
|`ZEFOFILL`|0填充|默认为UNSIGNED|
|`DEFAULT`|列的默认值|默认为NULL，只能用固定语法对NULL进行比较：NULL IS NULL；所以推荐声明为：NOT NULL DEFAULT 0|
####小数型
#####浮点型
######语法
```sql
FLOAT (M, D)
```
其中：
- M： 精度，表示总的位数（整数位+小数位）
- D：标度，小数位
######实例
```sql
FLOAT(6,2) #表示范围：-9999.99 ~ 9999.99
```
######四舍五入规则
- 5前面是1379则“舍”
- 5前面是2468则“进”
#####定点型
######语法
```sql
DECIMAL (M, D)
```
#####与FLOAT比较
- 精度更高，实用于货币
- ![与`FLOAT`对比](http://askingwindy-gitcafe.qiniudn.com/decimal与float对比.png)
###字符型
|类型|说明|典型声明方式|范围|
|---|---|---|---|
|`CHAR`|定长字符串（不够空格补齐）|`gender CHAR(1)`|$CHAR(M),0<=M<=255字符$|
|`VARCHAR`|变长字符串|`email VARCHAR(20)`|$VARCHAR(M), 0<=M<=65535$,	注释：如果值的长度大于255，将被转化为TEXT类型|
|`TEXT`|文本串|`content TEXT`|约2w~6w个字符，受字符集影响|
####`CHAR`与`VARCHAR`
##### 性能比较
- 在字符长度一定时，`CHAR`性能比`VARCHAR`好
- 长度不确定时，`CHAR`类型的字段在使用时性能略差
#####区别
1. M值得范围不同
2. 空间利用率不同
3. 末尾空格存储方式不同
4. 速度上，`CHAR`更快
###日期/时间类型
#### `YEAR`年类型
- 1个字节
- 范围为:$[1901,2155]$年，$0000$表示错误的时间
- 一般输入为4位数字，如果输入为2位数字：
	- $[00,69]$年表示$[2000,2069]$年
	- 否则表示$[1970,1999]$年
![year输入与显式](http://askingwindy-gitcafe.qiniudn.com/year.png)
####`DATE`日期类型
- 范围为:$[1000-01-01,9999-12-31]$
- 典型格式为：1992-08-12
- ![DATE的输入与显式](http://askingwindy-gitcafe.qiniudn.com/date.png)
####`TIME`时间类型
- 范围不止24小时，因为可以表示两个时间只差：$[-838:59:59, 838:59:59]$
- 典型格式为：hh:mm:ss
###`DATETIME`日期时间类型
 - 典型格式为：1989-05-06 14:32:08
 - 开发中，很少用`DATETIME`表示一个需要精确到秒的列，往往用**时间戳**表示
###时间戳
- 计算从1970-01-01 00:00:00到当前的秒数
- 方便计算：用`INT`存储时间戳
- 对于显式：通过函数进行格式化
#### `UNIX_TIMESTAMP()`获得时间戳
```sql
#返回现在的时间戳，例如：1428843853
SELECT UNIX_TIMESTAMP();
```
将`DATE`或者`DATETIME`转化为时间戳
```sql
SELECT UNIX_TIMESTAMP('1991-11-05');#DATE转化为时间戳
SELECT UNIX_TIMESTAMP('1991-11-05 0:0:0');#DATETIME转化为时间戳
```
####`FROM_UNIXTIME(UNIX_TIMESTAMP, FORMAT)`将时间戳转化为时间
```sql
SELECT FROM_UNIXTIME(UNIX_TIMESTAMP());#显式现在时间，默认格式为:'2015-04-08 21:32:30'
```
其中，FORMAT可以包含与`DATE_FORMAT()`函数输入项列表相同的说明符
#### 关于时间的计算
##### `DATEDIFF(exp1, exp2)`
返回开始时间exp1与结束时间exp2之间的天数，exp1/exp2可能是DATE或者DATETIME，计算时值用到日期部分
```sql
SELECT DATEDIFF(’1997-12-31 23:59:59′,’1997-12-30′);#返回1
SELECT DATEDIFF(’1997-11-30 23:59:59′,’1997-12-31′);#返回-31
```
#####`ADDDATE(exp, days)`
```sql
SELECT ADDDATE(,1998-01-02',31);#输出为1998-02-02
```
同理，用函数`ADDTIME(exp1, exp2)`可以使用
